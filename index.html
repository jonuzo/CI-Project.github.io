<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css" type="text/css">
</head>
<body>
  <nav>
    <ul>
      <a href="about.html">About Us</a>
    </ul>
  </nav>

  <h1>What movie do you want to review?</h1>
  <input type="text" id="search-input" placeholder="Enter movie title">
  <button onclick="searchAPI()">Search</button>   <!--Clicking search button executes searchAPI()--> 
  <ul id="search-results"></ul>
  
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>

  
  <script>
     
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "firebase/app";
  import { getAnalytics } from "firebase/analytics";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
  apiKey: "AIzaSyAyg8NJXvigvm1rn8cwh-h42xHjaq5KHGM",
  authDomain: "accounts-d66dd.firebaseapp.com",
  projectId: "accounts-d66dd",
  storageBucket: "accounts-d66dd.appspot.com",
  messagingSenderId: "380115432865",
  appId: "1:380115432865:web:41ad9d686face3bc6807e0",
  measurementId: "G-6YWES12JGH"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
    
  </script>
  

  <script>
    function searchAPI() {   <!-- used to extract data from API-->
      const searchQuery = document.getElementById("search-input").value;
      const apiUrl = `https://api.themoviedb.org/3/search/movie?api_key=6aa86f5797de13c2b8d8eb2581248f51&language=en-US&query=${searchQuery}&page=1&include_adult=false`;
      fetch(apiUrl)
        .then(response => response.json())  <!--Data recieved in json format-->
        .then(data => {
          const resultsList = document.getElementById("search-results");
          resultsList.innerHTML = "";
          data.results.slice(0, 5).forEach((result, index) => {
            const listItem = document.createElement("li");
            const link = document.createElement("a");
            link.href = `movie.html?movie-title=${result.title}`;     <!--creates a link on each movie title in results list--> 
            link.innerText = `${index + 1}. ${result.title}`;
            const movieTitle = result.title;
            localStorage.setItem('movie-title', result.title);       
            listItem.appendChild(link);
            resultsList.appendChild(listItem);
          });
        });
    }
  </script>
</body>
</html>
